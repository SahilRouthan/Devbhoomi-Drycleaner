<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact Us - Devbhoomi DryCleans</title>
  <link rel="stylesheet" href="css/main.css" />
</head>
<body>
  <div id="header-placeholder"></div>

  <!-- Hero / Intro -->
  <section class="hero hero-contact">
    <div class="hero-content" data-reveal>
      <h1 id="hero-title">Contact Us â€” Book a Pickup or Ask a Question</h1>
      <p class="lead" id="hero-subtitle">Fast response, convenient pickup & delivery, and expert garment care. Call, chat or send us a message.</p>
      <div class="cta-row">
        <a class="cta-button" href="#contact-form">Send Message</a>
        <a class="cta-button" href="#contact-info">Call / WhatsApp</a>
      </div>
    </div>
  </section>

  <!-- Order Summary (shown only if coming from cart) -->
  <section id="order-summary" class="container" style="display:none; padding: 24px 0;">
    <div class="order-summary-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 24px; border-radius: 12px; box-shadow: 0 8px 24px rgba(0,0,0,0.15);">
      <h2 style="margin: 0 0 16px; font-size: 24px;">ðŸ“¦ Order Summary</h2>
      <div id="order-items" style="background: rgba(255,255,255,0.1); padding: 16px; border-radius: 8px; margin-bottom: 16px;"></div>
      <div style="display: flex; justify-content: space-between; font-size: 18px; font-weight: 600; padding-top: 12px; border-top: 2px solid rgba(255,255,255,0.3);">
        <span>Total Amount:</span>
        <span id="order-total">â‚¹0</span>
      </div>
      <div id="order-payment-method" style="margin-top: 12px; padding: 12px; background: rgba(255,255,255,0.15); border-radius: 6px; text-align: center; font-size: 16px;"></div>
    </div>
  </section>

  <!-- Contact Section -->
  <main class="container" style="padding-top:36px;">
    <section class="contact" aria-labelledby="contact-heading">
      <h2 id="contact-heading">Get in Touch</h2>
      <p class="lead">Fill out the form or use quick actions to call or WhatsApp us directly.</p>

      <div class="contact-grid" data-reveal>
        <!-- Left: Form card -->
        <div class="form-card" data-reveal>
          <form id="contact-form" class="form" aria-label="Contact form" novalidate>
            <div class="form-row">
              <label class="sr-only" for="name">Full name</label>
              <div class="input-group">
                <svg class="input-icon" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 12a5 5 0 100-10 5 5 0 000 10zm0 2c-5 0-9 2.5-9 5.5V22h18v-2.5c0-3-4-5.5-9-5.5z"/></svg>
                <input class="input" id="name" name="name" placeholder="Your full name" required autocomplete="name" />
              </div>

              <label class="sr-only" for="email">Email</label>
              <div class="input-group">
                <svg class="input-icon" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M20 4H4a2 2 0 00-2 2v12a2 2 0 002 2h16a2 2 0 002-2V6a2 2 0 00-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
                <input class="input" id="email" name="email" type="email" placeholder="Email address (optional for orders)" autocomplete="email" />
              </div>

              <label class="sr-only" for="phone">Phone</label>
              <div class="input-group">
                <svg class="input-icon" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M6.6 10.8a15.05 15.05 0 006.6 6.6l1.9-1.9a1 1 0 011.1-.2 11.72 11.72 0 003.7 1.1 1 1 0 01.9 1V20a1 1 0 01-1 1C9.1 21 3 14.9 3 6a1 1 0 011-1h2.5a1 1 0 011 .9c.1 1.3.4 2.6 1.1 3.8a1 1 0 01-.2 1.1l-1.8 1.9z"/></svg>
                <input class="input" id="phone" name="phone" placeholder="Mobile Number (for order updates)" required autocomplete="tel" />
              </div>
            </div>

            <label for="service" class="field-label">Service required</label>
            <div class="input-group select-group">
              <select id="service" name="service" class="input" aria-label="Service">
                <option>Pickup & Delivery</option>
                <option>Laundry & Dry Cleaning</option>
                <option>Curtain & Carpet Cleaning</option>
                <option>Shoe & Bag Spa</option>
                <option>Other / Quote</option>
              </select>
            </div>

            <!-- NEW: Pickup / Delivery Address fields -->
            <label for="pickup-address" class="field-label">Pickup & Delivery Address *</label>
            <div class="input-group">
              <textarea class="textarea" id="pickup-address" name="pickup_address" rows="3" placeholder="Complete address with house no., street, landmark, and PIN code" required></textarea>
            </div>

            <div class="delivery-toggle" style="margin:8px 0;">
              <label>
                <input type="checkbox" id="sameAddress" checked />
                Delivery address same as pickup
              </label>
            </div>

            <div id="deliveryAddressGroup" style="display:none;">
              <label for="delivery-address" class="field-label">Delivery address</label>
              <div class="input-group">
                <textarea class="textarea" id="delivery-address" name="delivery_address" rows="3" placeholder="Delivery address (leave empty if same as pickup)"></textarea>
              </div>
            </div>
            <!-- END NEW -->
            
            <label class="sr-only" for="message">Message</label>
            <div class="input-group">
              <textarea class="textarea" id="message" name="message" rows="4" placeholder="Tell us details (items, preferred pickup date/time)" required></textarea>
            </div>

            <div class="actions">
              <button id="sendBtn" class="contact-button primary" type="submit" aria-live="polite">
                <span class="btn-text">Send Message</span>
                <svg class="btn-spinner" viewBox="0 0 50 50" aria-hidden="true"><circle cx="25" cy="25" r="20" stroke-width="4" fill="none" stroke="white" stroke-linecap="round" /></svg>
              </button>

              <button id="whatsappQuick" type="button" class="contact-button wa" aria-label="Send via WhatsApp">
                <svg viewBox="0 0 24 24" class="wa-icon" aria-hidden="true"><path fill="currentColor" d="M20.5 3.5A11.94 11.94 0 0012 0C5.4 0 .1 5.4.1 12S5.4 24 12 24c2.1 0 4.1-.5 5.9-1.5L24 24l-1.6-6.3C23.8 15.9 24 14 24 12 24 5.4 18.6 0 12 0zM17 15.4c-.3.8-1.6 1.5-2.3 1.6-.6.1-1.1.1-1.9-.2s-2.2-1.1-3.3-2-2-2-2-2.7c-.2-.6 0-1.1.4-1.5.2-.1.5-.3.8-.5.3-.2.4-.3.6-.4.2-.1.3-.1.5.1.3.2 1 .8 1.3 1 .3.2.5.3.8.2.3 0 .8-.1 1.3-.2.5-.1.9-.2 1.3.1.4.3 1.5 1.2 1.8 1.6.3.4.3.8.1 1.3z"/></svg>
                WhatsApp
              </button>

              <div id="form-status" class="form-status" role="status" aria-live="polite"></div>
            </div>
            <div class="hint">Tip: Press <kbd>Ctrl/âŒ˜</kbd> + <kbd>Enter</kbd> to submit quickly.</div>
          </form>
        </div>

        <!-- Right: Info + placeholder map -->
        <aside class="info-column" data-reveal>
          <div class="info-card">
            <h3>Contact Information</h3>
            <p class="muted"><strong>Email:</strong> <a href="mailto:devbhoomidrycleaner38@gmail.com">devbhoomidrycleaner38@gmail.com</a></p>
            <p class="muted"><strong>Phone:</strong> <a href="tel:+919958843588">+91 99588 43588</a></p>
            <p class="muted"><strong>Address:</strong> B-70, Sashi Garden, Shiv Mandir Road, Mayur Vihar, Phase-1, Delhi-110091</p>
            <p class="muted"><strong>Hours:</strong> Monâ€“Sat â€¢ 10:00 â€” 21:00</p>

            <div class="quick-actions">
              <a class="header-cta" href="tel:+919958843588" style="background:linear-gradient(90deg,#0ea5ff,#1678e8);">Call Now</a>
              <a id="waTop" class="header-cta" href="https://wa.me/919958843588" target="_blank" rel="noreferrer" style="background:linear-gradient(90deg,#25D366,#1DA851);">WhatsApp</a>
            </div>
          </div>

          <div class="map-placeholder" aria-hidden="false" data-reveal>
            <!-- inline SVG placeholder (no external requests) -->
            <svg width="100%" height="160" viewBox="0 0 300 160" preserveAspectRatio="xMidYMid meet" aria-hidden="true">
              <rect width="300" height="160" rx="12" fill="#f5fbff" />
              <path d="M30 120 L70 80 L110 110 L150 60 L190 100 L230 70 L270 110" stroke="#1678e8" stroke-width="4" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="70" cy="80" r="5" fill="#1e90ff"/>
            </svg>
            <div style="text-align:center;margin-top:10px;color:var(--muted);">
              Map disabled â€” <a href="https://www.google.com/maps/place/B-70,+Sashi+Garden,+Mayur+Vihar,+Delhi" target="_blank" rel="noopener" class="learn-more">Open in Google Maps</a>
            </div>
          </div>

          <div class="info-card" aria-hidden="false" data-reveal>
            <strong>How pickup works</strong>
            <ol class="muted">
              <li>Book pickup via form, call, or WhatsApp.</li>
              <li>We pick, clean with eco-friendly solvents, and quality-check.</li>
              <li>Delivered back on your chosen slot â€” contactless available.</li>
            </ol>
          </div>
        </aside>
      </div>
    </section>
  </main>

  <!-- Floating quick actions -->
  <a id="floating-call" href="tel:+919958843588" class="fab call" aria-label="Call us">ðŸ“ž</a>
  <a id="floating-wa" href="https://wa.me/919958843588" target="_blank" rel="noreferrer" class="fab wa" aria-label="WhatsApp">ðŸ’¬</a>

  <div id="footer-placeholder"></div>

  <script src="js/main.js"></script>
  <script src="js/contact-form.js"></script>

  <!-- Order Summary & Address Toggle -->
  <script>
    (function () {
      // Check for pending order from cart
      const pendingOrder = localStorage.getItem('pendingOrder');
      if (pendingOrder) {
        try {
          const order = JSON.parse(pendingOrder);
          displayOrderSummary(order);
        } catch (e) {
          console.error('Failed to parse order:', e);
        }
      }

      function displayOrderSummary(order) {
        const summarySection = document.getElementById('order-summary');
        const itemsContainer = document.getElementById('order-items');
        const totalEl = document.getElementById('order-total');
        const paymentMethodEl = document.getElementById('order-payment-method');
        const heroTitle = document.getElementById('hero-title');
        const heroSubtitle = document.getElementById('hero-subtitle');

        if (!summarySection) return;

        // Update hero text
        if (heroTitle) heroTitle.textContent = 'âœ“ Almost Done! â€” Complete Your Order';
        if (heroSubtitle) heroSubtitle.textContent = 'Please provide your details below to confirm your order and schedule pickup.';

        // Build items list
        let itemsHTML = '<div style="max-height: 200px; overflow-y: auto;">';
        order.items.forEach(item => {
          itemsHTML += `
            <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
              <span>${item.name} Ã— ${item.quantity}</span>
              <span>â‚¹${(item.price * item.quantity).toFixed(2)}</span>
            </div>
          `;
        });
        itemsHTML += '</div>';

        if (order.discount > 0) {
          itemsHTML += `
            <div style="display: flex; justify-content: space-between; padding: 8px 0; color: #90EE90;">
              <span>ðŸ’° Discount Applied</span>
              <span>-â‚¹${order.discount.toFixed(2)}</span>
            </div>
          `;
        }

        itemsContainer.innerHTML = itemsHTML;
        totalEl.textContent = `â‚¹${order.total.toFixed(2)}`;
        
        if (order.paymentMethod === 'cod') {
          paymentMethodEl.innerHTML = 'ðŸ’µ Payment: <strong>Cash on Delivery</strong>';
        } else if (order.paymentMethod === 'online' && order.paymentStatus === 'paid') {
          paymentMethodEl.innerHTML = `âœ“ Payment: <strong>Paid Online</strong><br><small>Payment ID: ${order.paymentId}</small>`;
        }

        summarySection.style.display = 'block';

        // Update service field
        const serviceField = document.getElementById('service');
        if (serviceField) {
          serviceField.value = 'Pickup & Delivery';
        }

        // Update message field with complete order details
        const messageField = document.getElementById('message');
        if (messageField && !messageField.value) {
          let itemsList = 'ITEMS:\n';
          order.items.forEach(item => {
            itemsList += `- ${item.name} x ${item.quantity} = â‚¹${(item.price * item.quantity).toFixed(2)}\n`;
          });
          
          let orderSummary = `${itemsList}\n`;
          orderSummary += `Subtotal: â‚¹${order.subtotal.toFixed(2)}\n`;
          if (order.discount > 0) {
            orderSummary += `Discount: -â‚¹${order.discount.toFixed(2)}\n`;
          }
          orderSummary += `TOTAL: â‚¹${order.total.toFixed(2)}\n\n`;
          orderSummary += `Payment Method: ${order.paymentMethod === 'cod' ? 'Cash on Delivery' : 'Paid Online'}`;
          
          messageField.value = orderSummary;
        }
      }

      // Toggle delivery address
      var same = document.getElementById('sameAddress');
      var deliveryGroup = document.getElementById('deliveryAddressGroup');
      var pickup = document.getElementById('pickup-address');
      var delivery = document.getElementById('delivery-address');

      function update() {
        if (same.checked) {
          deliveryGroup.style.display = 'none';
          if (pickup && delivery) delivery.value = pickup.value || '';
        } else {
          deliveryGroup.style.display = 'block';
        }
      }

      if (same && pickup) {
        same.addEventListener('change', update);
        pickup.addEventListener('input', function () {
          if (same.checked && delivery) delivery.value = pickup.value;
        });
        // init
        update();
      }
    })();
  </script>

</body>
</html>